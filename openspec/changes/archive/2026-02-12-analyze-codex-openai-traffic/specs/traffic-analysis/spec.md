## ADDED Requirements

### Requirement: Parse Traffic Data
The system SHALL provide functionality to parse the structured traffic data (e.g., JSON, HAR) generated by the capture tool.

#### Scenario: Parse Valid File
- **WHEN** a valid traffic data file is provided
- **THEN** the system successfully reads and loads the request/response pairs into memory

#### Scenario: Handle Invalid File
- **WHEN** a malformed or invalid file is provided
- **THEN** the system reports an error indicating the file format is incorrect

### Requirement: Analyze Communication Patterns
The system SHALL analyze the parsed traffic to identify and summarize key communication patterns, such as request frequency, endpoint usage, and payload structures.

#### Scenario: Summarize Endpoint Usage
- **WHEN** analysis is run on a set of traffic data
- **THEN** the system outputs a summary of unique endpoints accessed and the count of requests to each

#### Scenario: Extract Payload Structure
- **WHEN** analysis is run on traffic data
- **THEN** the system identifies common keys and data types in the JSON payloads of requests and responses

### Requirement: Generate Analysis Report
The system SHALL generate a readable report (e.g., Markdown) summarizing the findings from the traffic analysis.

#### Scenario: Create Markdown Report
- **WHEN** analysis is complete
- **THEN** the system saves a Markdown file containing the summary of endpoints, request counts, and payload structures

#### Scenario: Include Full Conversation Log
- **WHEN** analysis is complete
- **THEN** the report includes a full conversation log section showing every captured request/response pair with:
  - Request headers (with sensitive values like Authorization redacted) in code blocks
  - Response headers in code blocks
  - Request body rendered as summarized key parts with explanations:
    - Model name and config fields (stream, tool_choice, etc.) inline
    - System instructions with character count and preview in a collapsible `<details>` section
    - Input messages as a table (index, role, type, content preview) with full text in collapsible sections
    - Tool definitions listed by name and type
  - Response body rendered as a summarized SSE stream with:
    - Byte size and event count
    - Event type breakdown table (event type â†’ count)
    - Assembled output text in a collapsible `<details>` section
    - Assembled reasoning summary in a collapsible `<details>` section
    - Tool calls (if any) with function name and arguments
    - Usage statistics (input/output/total tokens)
- **AND** long content sections are wrapped in collapsible `<details>` sections to keep the report scannable
- **AND** actual content excerpts (instructions text, message text, output text) use fenced code blocks within the collapsible sections
